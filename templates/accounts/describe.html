{% extends "base.html" %}
{% load filefunctions %}

{% block title %}{{ block.super }}Describe{% endblock %}

{% block head %}
{{ block.super }}
<script type="text/javascript">
    var checkedAll = false;

    function select_ul(element)
    {
        checkedAll = !checkedAll;
        $(element.parentNode).find("input").attr('checked', checkedAll);
        $("#fileform").find("option").attr('selected', checkedAll);
        $('#select_all').text(checkedAll ? 'deselect all' : 'select all');
    }

    function checkboxChange(checkbox)
    {
        var option = $("#fileform").find("option[value=" + checkbox.name + "]").get(0);
        if (checkbox.checked)
            option.selected = true;
        else
            option.selected = false;
    }

    {% if ask_for_interface %}
        function show_popup(){
            $("#ask_for_interface").show();
        }

        function submit(form, value){
            $("#participate_in_experiment").val(value);
            form.submit();
        }
    {% endif %}

</script>
{% endblock %}

{% block content %}
<div id="describe_page">
<h1>Describe</h1>
<h3>Pick files</h3>
<p>You've uploaded these files, but they won't appear on the website
until you've described them. Select the files you want to describe and
follow the instructions on the following pages. You can also delete files by
selecting them and pressing the "delete" button.
<ul id="root_file" class="upload">
    {% show_file file_structure %}
</ul>
<form action="." method="post" id="fileform">{% csrf_token %}
    <div style="display:none">
    {{form.as_p}}
    </div>

    {% if ask_for_interface %}
        <input type="button" value="describe" onclick="show_popup()">
    {% else %}
        <input type="submit" value="describe" name="describe" style="margin-left:10px">
    {% endif %}
    <input type="submit" value="delete" name="delete">

        {% if ask_for_interface %}
        <div id="ask_for_interface" style="display:none;margin-top:10px;margin-left:10px;">
            <p>
            Do you want to participate bla bla bla?
                <br>

                <input type="radio" name="participate_in_experiment" value="yes"/>Yes
                <input type="radio" name="participate_in_experiment" value="no"/>No

                <input type="submit" value="continue" name="describe" style="margin-left:10px">
            </p>

        </div>
        {% endif %}
</form>

</div><!-- #describe_page -->
{% endblock %}
