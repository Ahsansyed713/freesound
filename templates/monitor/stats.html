{% extends "base.html" %}

{% block head %}
{{ block.super }}
<style type="text/css">
  .tags{
    font-family: Arial, sans-serif;
    font-size:10px;
  }
  .axis path,.axis line {
    fill: none;
    stroke: #b6b6b6;
    shape-rendering: crispEdges;
  }
  g.journal.active{
    cursor: pointer;
  }
  text.label{
    font-size: 12px;
    font-weight: bold;
    cursor: pointer;
  }
  text.value{
    font-size: 12px;
    font-weight: bold;
  }
  g.legend { 
    font: 10px sans-serif;
  }
</style>
{% endblock head %}

{% block title %}
    Monitor
{% endblock title %}

{% block content %}

    <h2>Global numbers</h2>
    <h3>total number of registered elements</h3>
    <div>
    <table>
      <tr><td><b>Active Users:</b></td><td id="total-users"></td></tr>
      <tr><td><b>Uploaders:</b></td><td id="users-with-sounds"></td></tr>
      <tr><td><b>Sounds:</b> </td><td id="total-sounds"></td></tr>
      <tr><td><b>Packs:</b> </td><td id="total-packs"></td></tr>
      <tr><td><b>Downloads:</b> </td><td id="total-downloads"></td></tr>
      <tr><td><b>Avg downloads per sound:</b> </td><td id="avg-downloads"></td></tr>
      <tr><td><b>Comments:</b> </td><td id="total-comments"></td></tr>
      <tr><td><b>Avg comments per sound:</b> </td><td id="avg-comments"></td></tr>
      <tr><td><b>Ratings:</b> </td><td id="total-ratings"></td></tr>
      <tr><td><b>Avg ratings per sound:</b> </td><td id="avg-ratings"></td></tr>
      <tr><td><b>Unique tags:</b> </td><td id="total-tags"></td></tr>
      <tr><td><b>Tags applications:</b> </td><td id="total-used-tags"></td></tr>
      <tr><td><b>Avg tags per sound:</b> </td><td id="avg-tags"></td></tr>
      <tr><td><b>Posts:</b> </td><td id="total-posts"></td></tr>
      <tr><td><b>Threads:</b> </td><td id="total-threads"></td></tr>
      <tr><td><b>Donations:</b> </td><td id="total-donations"></td></tr>
    </table>


    </div>
 
    <h2>Users</h2>
    <h3>Registered users on last two weeks</h3>
    <div class='users'>
    </div>
    
    <h3>Active users by activity per week</h3>
    <div class='active-users'>
    </div>

    <h2>Sounds</h2>
    <h3>Sounds created on last two weeks</h3>
    <div class='uploads'>
    </div>
    
    <h2>Downloads</h2>
    <h3>Downloads on last two weeks</h3>
    <div class='downloads'>
    </div>

    <h2>Donations</h2>
    <h3>Donations on last year</h3>
    <div class='donations'>
    </div>

    <h2>Tags</h2>
    <h3>Most used tags on last two weeks</h3>
    <div class='tags'>
    </div>
    <h3>Tag cloud with most used tags</h3>
    <canvas id='tags-cloud' width=600 height=600>
    </canvas>
    <h3>Tag cloud with most downlaoded tags on last two weeks</h3>
    <canvas id='down-tags-cloud' width=600 height=600>
    </canvas>

    <script>
      var totalsDataUrl = '{% url 'monitor-totals-stats-ajax' %}';
      var tagsDataUrl = '{% url 'monitor-tags-stats-ajax' %}';
      var downloadsDataUrl = '{% url 'monitor-downloads-stats-ajax' %}';
      var donationsDataUrl = '{% url 'monitor-donations-stats-ajax' %}';
      var soundsDataUrl = '{% url 'monitor-sounds-stats-ajax' %}';
      var usersDataUrl = '{% url 'monitor-users-stats-ajax' %}';
      var activeUsersDataUrl = '{% url 'monitor-active-users-stats-ajax' %}';
    </script>
    <script src="https://d3js.org/d3.v4.min.js" type="text/javascript"></script>
    <script src="https://d3js.org/d3-axis.v1.min.js"></script>
    <script src="https://d3js.org/d3-array.v1.min.js"></script>
    <script src="https://d3js.org/d3-collection.v1.min.js"></script>
    <script src="https://d3js.org/d3-color.v1.min.js"></script>
    <script src="https://d3js.org/d3-format.v1.min.js"></script>
    <script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
    <script src="https://d3js.org/d3-time.v1.min.js"></script>
    <script src="https://d3js.org/d3-time-format.v2.min.js"></script>
    <script src="https://d3js.org/d3-scale.v1.min.js"></script>
    <script src="https://d3js.org/d3-path.v1.min.js"></script>
    <script src="https://d3js.org/d3-shape.v1.min.js"></script>
    <script src="{{media_url}}js/wordcloud2.js"></script>
    <script src="{{media_url}}js/stats.js" type="text/javascript"></script>
{% endblock content %}
