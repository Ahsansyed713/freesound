{% extends "sounds/_section.html" %}

{% load display_sound %}
{% load paginator %}

{% block title %}pack: {{pack.name}} by {{pack.user.username}}{% endblock title %}

{% block section_content %}

<script type="text/javascript">
    function showDescriptionForm()
    {
        $("#description_form").show('blind', {}, 500, function() {});
	$("#add_description_label").hide();
    }

    //function hideDescriptionForm()
    //{
    //    $("#description_form").hide('blind', {}, 500, function() {});
    //}
</script>

<h1>Pack: {{pack.name}} by <a href="{% url account pack.user.username %}">{{pack.user.username}}</a></h1>

<p>
{% if pack.description %}

    {{pack.description}}
    {% if enable_description_form %}
	<br>
	<div id="add_description_label">
	<a onclick='showDescriptionForm();'><span class="show_description_form_toggle">Edit current description...</span></a>
	</div>
    {% endif %}
{% else %}
    {% if enable_description_form %}
	<div id="add_description_label">
	This pack has no description.
	<a onclick='showDescriptionForm();'><span class="show_description_form_toggle">Add a description...</span></a>
	</div>
    {% endif %}
{% endif %}
</p>


<p>
    
    
    <div id ="description_form" style="display:none">
    {% if enable_description_form %}
    <form action="" method="post">{% csrf_token %}
	{{ form.as_p }}
    <input type="submit" value="Save description" />
    </form>
    {% endif %}
    </div>
</p>




{% if not pack.is_dirty %}
	{% if num_sounds_ok > 0 %}
		<div id="single_pack_sidebar">
		<div id="download">
		    {% if request.user.is_authenticated %}
		    	<a href="{% url pack-download pack.user.username pack.id %}{{ pack.friendly_filename }}" onclick="_gaq.push(['_trackEvent', 'Pack', 'Download', 'pack_id:{{ pack.id }}']);" id="download_button" title="download pack"></a>
		    	<div id="download_text"><a href="{% url pack-downloaders pack.user.username pack.id %}">Downloaded<br /><b>{{pack.num_downloads}}</b> times</a></div>
		    {% else %}
		    	<a href="{% url pack-download pack.user.username pack.id %}{{ pack.friendly_filename }}" id="download_login_button" title="download pack"></a>
		    	<div id="download_text"><a href="{% url pack-downloaders pack.user.username pack.id %}">Downloaded<br /><b>{{pack.num_downloads}}</b> times</a></div>
		    {% endif %}
		</div>
		</div>
	{% endif %}
{% endif %}


<div id="pack_info" class="content_box">
    <h3>Pack info</h3>
    <div class="sound_list_normal">
        <ul>
            <li>Pack created on: <b>{{ pack.created }}</b></li>
            <li>Number of sounds: <b>{{ pack.num_sounds }}</b></li>
            <li>Number of downloads: <b>{{ pack.num_downloads }}</b></li>            
        </ul>
    </div>
</div><!-- #pack_info -->

<p>
    See <a href="{% url packs-for-user pack.user.username %}">more packs</a> by <a href="{% url account pack.user.username %}">{{pack.user.username}}</a>
</p>



{% if pack.num_sounds > 0 %}
	{% show_paginator paginator page current_page request "sound" %}
	
	{% for sound in page.object_list %}
    	{% display_sound sound %}
	{% endfor %}
	
	{% show_paginator paginator page current_page request "sound" %}

{% else %}
	<p>This pack does not contain any sound.</p>
{% endif %}



{% endblock %}
